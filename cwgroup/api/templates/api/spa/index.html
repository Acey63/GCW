<!-- api/spa/index.html -->

<!-- Your existing Vue.js and HTML code -->

<script>
  new Vue({
      // Your existing Vue.js code

      methods: {
          submitForm() {
              fetch('/main_spa/', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json',
                      'X-CSRFToken': csrf_token,
                  },
                  body: JSON.stringify(this.form),
              })
              .then(response => response.json())
              .then(data => {
                  if (data.status === 'success') {
                      alert('Profile updated successfully!');
                  } else {
                      alert('Error updating profile. Please check the form.');
                      console.error(data.errors);
                  }
              })
              .catch(error => {
                  console.error('Error updating profile:', error);
              });
          }
      }
  });
</script>
